# ğŸ“Š Segment Tree-Enhanced Retrieval in AI Pipelines  

**Case Study for Data Structures and Algorithms (23CSE203)**  

This project integrates **Data Structures (Segment Tree)** with an **AI-powered Retrieval-Augmented Generation (RAG) pipeline** to optimize stock-related queries. It demonstrates how advanced algorithms and AI models can work together for efficient data retrieval, analysis, and user interaction.  

---

## ğŸš€ Project Overview  

- **Backend (Python + Flask)**  
  - Implements **Segment Trees** for efficient stock query operations (min, max, sum, average over a date range).  
  - Integrates with **Pinecone Vector DB** to store embeddings.  
  - Uses **Google Gemini embeddings + LLM** for natural language queries.  
  - Provides APIs that combine AI + data structure outputs.  

- **Frontend (React + Vite)**  
  - Interactive UI for querying stock data.  
  - Displays AI-enhanced insights along with structured results from the segment tree.  
  - User-friendly interface to test queries.  

---


## Work Flow
**Segment Tree + RAG Pipeline Flow**
```
User Query
â†“
Flask API (/chat endpoint)
â†“
chat_bot.py (Query Handler)
â†“
RAG Pipeline (rag_setup.py)
|   â”œâ”€ Pinecone Vector DB (document retrieval)
|   â”œâ”€ Google Gemini Embeddings (text â†’ vectors)
|   â””â”€ Gemini LLM (natural language understanding)
|                      â†“
|       Generates JSON Command OR Text Answer
â†“
Decision Point:
    â”œâ”€ [JSON Command Found] â†’ Segment Tree (segment_tree.py)
    â”‚                    â†“
    â”‚            Numerical Result
    â””â”€ [No Command] â†’ Direct RAG Answer
                         â†“
                    Final Answer
```
## Description
---

**Description**

- **User Query**: Natural language input from the frontend UI.
- **Flask API**: Receives user query and routes to backend query handler.
- **chat_bot.py**: Handles preprocessing and determines if Segment Tree is needed.
- **RAG Pipeline**:  
  - Retrieves relevant documents using Pinecone Vector DB.  
  - Converts text to embeddings using Google Gemini.  
  - Uses Gemini LLM for understanding and generating a JSON command or direct text answer.
- **Decision Point**:  
  - If a JSON command is generated (e.g., range query for min/max/sum/avg), it is processed by the Segment Tree module for efficient computation.  
  - If no JSON command is generated, the response is taken directly from the RAG output.
- **Segment Tree (segment_tree.py)**: Performs efficient numerical operations for the query.
- **Final Response**: Sent back to frontend for display.
---

## ğŸ“‚ Project Structure
```

â”œâ”€â”€ backend/ 
â”œâ”€â”€ frontend/ # React + Vite app
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ LICENSE   

```

---

## âš™ï¸ Installation & Setup  

### ğŸ”¹ Backend Setup (Python)  

```bash
# Navigate to backend
cd backend

# Create a virtual environment
python -m venv venv

# Activate the environment
# On Windows
venv\Scripts\activate
# On Mac/Linux
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Run backend server
python app.py
```
The backend will start running (default: http://127.0.0.1:5000/).

### ğŸ”¹ Frontend Setup (React + Vite)
```bash
# Navigate to frontend
cd frontend

# Install dependencies
npm install

# Start development server
npm run dev
```
The frontend will run on http://localhost:5173/ by default.

---

# ğŸ§  How It Works

**User Query** â†’ User enters a stock-related query in natural language (e.g., *"What is the average price of AAPL between Jan 1 and Jan 15?"*).

**RAG Retrieval** â†’ Gemini embeddings + Pinecone fetch relevant historical stock data.

**Segment Tree Processing** â†’ If the query involves numerical operations (min, max, avg, sum), a Segment Tree processes it efficiently.

**AI + Data Structure Response** â†’ Final response is generated by combining retrieved AI context and Segment Tree calculations.

**Frontend Display** â†’ Results are displayed neatly in the React UI.

---

# âœ¨ Features

- ğŸ” **Hybrid Querying** â†’ Combines AI retrieval with Segment Tree efficiency.
- ğŸ“ˆ **Efficient Stock Queries** â†’ Range queries (min, max, avg, sum) in O(log n).
- ğŸ¤– **AI-Powered Assistant** â†’ Understands user queries in natural language.
- ğŸŒ **Full-Stack Integration** â†’ Backend (Python) + Frontend (React + Vite).
